
const VOTES_JSON=[
    {
    "questionId": "Q1",
    "Vote": 5,
    "userId": "U1"
    },
    {
    "questionId": "Q1",
    "Vote": 5,
    "userId": "U2"
    },
    {
    "questionId": "Q1",
    "Vote": 2,
    "userId": "U3"
    },
    {
    "questionId": "Q1",
    "Vote": 3,
    "userId": "U4"
    },
    {
    "questionId": "Q1",
    "Vote": 2,
    "userId": "U5"
    },
    {
    "questionId": "Q1",
    "Vote": 3,
    "userId": "U6"
    },
    {
    "questionId": "Q1",
    "Vote": 1,
    "userId": "U7"
    },
    {
    "questionId": "Q1",
    "Vote": 4,
    "userId": "U8"
    },
    {
    "questionId": "Q1",
    "Vote": 3,
    "userId": "U9"
    },
    {
    "questionId": "Q1",
    "Vote": 5,
    "userId": "U10"
    },
    {
    "questionId": "Q1",
    "Vote": 4,
    "userId": "U11"
    },
    {
    "questionId": "Q1",
    "Vote": 1,
    "userId": "U12"
    },
    {
    "questionId": "Q1",
    "Vote": 4,
    "userId": "U13"
    },
    {
    "questionId": "Q1",
    "Vote": 5,
    "userId": "U14"
    },
    {
    "questionId": "Q1",
    "Vote": 5,
    "userId": "U15"
    },
    {
    "questionId": "Q1",
    "Vote": 3,
    "userId": "U16"
    },
    {
    "questionId": "Q1",
    "Vote": 4,
    "userId": "U17"
    },
    {
    "questionId": "Q1",
    "Vote": 3,
    "userId": "U18"
    },
    {
    "questionId": "Q1",
    "Vote": 2,
    "userId": "U19"
    },
    {
    "questionId": "Q1",
    "Vote": 2,
    "userId": "U20"
    },
    {
    "questionId": "Q2",
    "Vote": 5,
    "userId": "U1"
    },
    {
    "questionId": "Q2",
    "Vote": 2,
    "userId": "U2"
    },
    {
    "questionId": "Q2",
    "Vote": 5,
    "userId": "U3"
    },
    {
    "questionId": "Q2",
    "Vote": 2,
    "userId": "U4"
    },
    {
    "questionId": "Q2",
    "Vote": 4,
    "userId": "U5"
    },
    {
    "questionId": "Q2",
    "Vote": 4,
    "userId": "U6"
    },
    {
    "questionId": "Q2",
    "Vote": 2,
    "userId": "U7"
    },
    {
    "questionId": "Q2",
    "Vote": 2,
    "userId": "U8"
    },
    {
    "questionId": "Q2",
    "Vote": 5,
    "userId": "U9"
    },
    {
    "questionId": "Q2",
    "Vote": 1,
    "userId": "U10"
    },
    {
    "questionId": "Q2",
    "Vote": 3,
    "userId": "U11"
    },
    {
    "questionId": "Q2",
    "Vote": 4,
    "userId": "U12"
    },
    {
    "questionId": "Q2",
    "Vote": 3,
    "userId": "U13"
    },
    {
    "questionId": "Q2",
    "Vote": 4,
    "userId": "U14"
    },
    {
    "questionId": "Q2",
    "Vote": 5,
    "userId": "U15"
    },
    {
    "questionId": "Q2",
    "Vote": 1,
    "userId": "U16"
    },
    {
    "questionId": "Q2",
    "Vote": 5,
    "userId": "U17"
    },
    {
    "questionId": "Q2",
    "Vote": 5,
    "userId": "U18"
    },
    {
    "questionId": "Q2",
    "Vote": 3,
    "userId": "U19"
    },
    {
    "questionId": "Q2",
    "Vote": 4,
    "userId": "U20"
    },
    {
    "questionId": "Q3",
    "Vote": 1,
    "userId": "U1"
    },
    {
    "questionId": "Q3",
    "Vote": 4,
    "userId": "U2"
    },
    {
    "questionId": "Q3",
    "Vote": 5,
    "userId": "U3"
    },
    {
    "questionId": "Q3",
    "Vote": 2,
    "userId": "U4"
    },
    {
    "questionId": "Q3",
    "Vote": 2,
    "userId": "U5"
    },
    {
    "questionId": "Q3",
    "Vote": 3,
    "userId": "U6"
    },
    {
    "questionId": "Q3",
    "Vote": 5,
    "userId": "U7"
    },
    {
    "questionId": "Q3",
    "Vote": 1,
    "userId": "U8"
    },
    {
    "questionId": "Q3",
    "Vote": 2,
    "userId": "U9"
    },
    {
    "questionId": "Q3",
    "Vote": 1,
    "userId": "U10"
    },
    {
    "questionId": "Q3",
    "Vote": 1,
    "userId": "U11"
    },
    {
    "questionId": "Q3",
    "Vote": 2,
    "userId": "U12"
    },
    {
    "questionId": "Q3",
    "Vote": 4,
    "userId": "U13"
    },
    {
    "questionId": "Q3",
    "Vote": 4,
    "userId": "U14"
    },
    {
    "questionId": "Q3",
    "Vote": 5,
    "userId": "U15"
    },
    {
    "questionId": "Q3",
    "Vote": 2,
    "userId": "U16"
    },
    {
    "questionId": "Q3",
    "Vote": 5,
    "userId": "U17"
    },
    {
    "questionId": "Q3",
    "Vote": 1,
    "userId": "U18"
    },
    {
    "questionId": "Q3",
    "Vote": 3,
    "userId": "U19"
    },
    {
    "questionId": "Q3",
    "Vote": 1,
    "userId": "U20"
    }
    ]
    const USER_JSON=[
    {
    "User": "U1",
    "location": "Bangalore",
    "designation": "Manager",
    "department": "Engg"
    },
    {
    "User": "U2",
    "location": "Sydney",
    "designation": "Manager",
    "department": "HR"
    },
    {
    "User": "U3",
    "location": "London",
    "designation": "Manager",
    "department": "Admin"
    },
    {
    "User": "U4",
    "location": "SF",
    "designation": "Manager",
    "department": "Ops"
    },
    {
    "User": "U5",
    "location": "Mumbai",
    "designation": "Manager",
    "department": "Engg"
    },
    {
    "User": "U6",
    "location": "Bangalore",
    "designation": "Developer",
    "department": "Engg"
    },
    {
    "User": "U7",
    "location": "Sydney",
    "designation": "Manager",
    "department": "HR"
    },
    {
    "User": "U8",
    "location": "London",
    "designation": "Manager",
    "department": "Admin"
    },
    {
    "User": "U9",
    "location": "Bangalore",
    "designation": "Manager",
    "department": "Ops"
    },
    {
    "User": "U10",
    "location": "Sydney",
    "designation": "Developer",
    "department": "Engg"
    },
    {
    "User": "U11",
    "location": "Bangalore",
    "designation": "Manager",
    "department": "HR"
    },
    {
    "User": "U12",
    "location": "SF",
    "designation": "Manager",
    "department": "Admin"
    },
    {
    "User": "U13",
    "location": "Mumbai",
    "designation": "Manager",
    "department": "Engg"
    },
    {
    "User": "U14",
    "location": "Sydney",
    "designation": "Manager",
    "department": "HR"
    },
    {
    "User": "U15",
    "location": "Bangalore",
    "designation": "Manager",
    "department": "Admin"
    },
    {
    "User": "U16",
    "location": "Sydney",
    "designation": "CEO",
    "department": "Engg"
    },
    {
    "User": "U17",
    "location": "London",
    "designation": "Manager",
    "department": "HR"
    },
    {
    "User": "U18",
    "location": "SF",
    "designation": "Manager",
    "department": "Admin"
    },
    {
    "User": "U19",
    "location": "Mumbai",
    "designation": "Manager",
    "department": "Ops"
    },
    {
    "User": "U20",
    "location": "Mumbai",
    "designation": "Manager",
    "department": "Engg"
    }
    ]
    
    const sort_user_json = (user_json) => {
      return user_json.reduce((accum,curr) => {
        if(curr.location in accum.location) {
          accum.location[curr.location].push(curr.User)
        }else {
          accum.location[curr.location] = [curr.User]
        }
        if(curr.designation in accum.designation) {
          accum.designation[curr.designation].push(curr.User)
        }else {
          accum.designation[curr.designation] = [curr.User]
        }
        if(curr.department in accum.department) {
          accum.department[curr.department].push(curr.User)
        }else {
          accum.department[curr.department] = [curr.User]
        }
        
        return accum;
      },{location:{}, designation: {}, department: {}})
    }
    
    const sentimentScore = (userList) => {
      return VOTES_JSON.reduce((accum,curr) =>{
        if(userList.includes(curr.userId)) {
          if(curr.Vote === 5 || curr.Vote === 4) {
            accum += 1
          } else if (curr.Vote === 1 || curr.Vote === 2) {
            accum -= 1
          }
        }
        
        return accum;
      },0)
    };
    
    const sortedSentimentScoreAsPerDimension = (dimension, sortedUserJson) => {
      const computedSentiments = Object.keys(sortedUserJson[dimension]).reduce((accum,curr) => {
        accum.push({
          [dimension]: curr, 
        'sentimentScore': sentimentScore(sortedUserJson[dimension][curr])
        })
        return accum;
      },[])
      computedSentiments.sort((a,b) => b.sentimentScore - a.sentimentScore)
      const totalSentiment = computedSentiments.reduce((accum,curr) => accum + curr.sentimentScore,0)
      
      return {computedSentiments, totalSentiment};
    }
    
    const sortedUserJson = sort_user_json(USER_JSON)
    
    console.log(sortedSentimentScoreAsPerDimension('department', sortedUserJson))
    console.log(sortedSentimentScoreAsPerDimension('location', sortedUserJson))
    console.log(sortedSentimentScoreAsPerDimension('designation', sortedUserJson))